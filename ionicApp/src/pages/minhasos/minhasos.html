
<ion-header>

  <ion-navbar>
    <ion-title>Minhas OS</ion-title>
  </ion-navbar>

</ion-header>



<ion-content class="contentMinhaos">

  <ion-segment [(ngModel)]="pet" class="segment">
    <ion-segment-button value="Aberto">
      <ion-label class="cortexto">Abertas</ion-label>
    </ion-segment-button>
    <ion-segment-button value="Andamento">
      <ion-label class="cortexto">Andamento</ion-label>
    </ion-segment-button>
    <ion-segment-button value="Pausadas">
        <ion-label class="cortexto">Pausadas</ion-label>
    </ion-segment-button>
  </ion-segment>

<ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
  <ion-refresher-content></ion-refresher-content>
</ion-refresher>
    
  

<div [ngSwitch]="pet">
  
      <ion-list *ngSwitchCase="'Andamento'" >
        <div class="holdContent">
          <div *ngIf="listaOSAndamento == ''">
                <h3 class="MSGcortexto">Você não possui nenhuma OS em Andamento</h3>
          </div>
          <ion-grid class="contentGridDetalhe" *ngIf="listaOSAndamento.length > 0" >
            <ion-row>
              <ion-col class="contentGridCol">
                <ion-list class="listContent" *ngFor="let item of listaOSAndamento">
                    <ion-item no-lines class="itemStyle" (click)="MostraDetalhes(item.idOrdemServico)">
                      <h2>Resumo: {{item.resumo}}</h2>
                      <p>Inicio Planejado: {{item.inicioPlanejado}}</p>
                      <p>Fim Planejado: {{item.fimPlanejado}}</p>
                      <span>Status: {{item.Status_idStatus}}</span>
                    </ion-item>
                    <div class="holdBtn">
                    <!-- <button  type="button" size="small" class="stylebutton"(click)="AlteraStatus(item.Status_idStatus, item.idOrdemServico)" >Encerrada</button> -->
                      <button  type="button" size="small" class="stylebutton"(click)="AlteraStatus('OSPausar',item.idOrdemServico)">Pausar</button> 
                    </div>
                    <ion-item no-lines class="itemStyle" >
                      <hr>
                    </ion-item>
                  </ion-list>
              </ion-col>
            </ion-row>
          </ion-grid>
        </div>
      </ion-list>

      <ion-list *ngSwitchCase="'Aberto'" >
        <div class="holdContent">
          <div *ngIf="listaOSAberta == ''">
              <h3 class="MSGcortexto">Você não possui nenhuma OS Abertas</h3>
          </div>
          <ion-grid class="contentGridDetalhe" *ngIf="listaOSAberta.length > 0" >
              <ion-row>
                <ion-col class="contentGridCol">
                  <ion-list class="listContent" *ngFor="let item of listaOSAberta">
                      <ion-item no-lines class="itemStyle" (click)="MostraDetalhes(item.idOrdemServico)">
                        <h2>Resumo: {{item.resumo}}</h2>
                        <p>Inicio Planejado: {{item.inicioPlanejado}}</p>
                        <p>Fim Planejado: {{item.fimPlanejado}}</p>
                        <span>Status: {{item.Status_idStatus}}</span>
                      </ion-item>
                      <div class="holdBtn">
                        <button  type="button" class="campo"(click)="AlteraStatus(item.Status_idStatus, item.idOrdemServico)">Iniciar</button> 
                      </div>
                      <ion-item no-lines class="itemStyle" >
                        <hr>
                      </ion-item>
                  </ion-list>
                </ion-col>
              </ion-row>
            </ion-grid>
        </div>
      </ion-list>
      <ion-list *ngSwitchCase="'Pausadas'" >
          <div *ngIf="listaOSPausadas == ''">
                <h3 class="MSGcortexto">Não há nenhuma OS Pausada</h3>
          </div>
          <ion-grid class="contentGridDetalhe" *ngIf="listaOSPausadas.length > 0" >
            <ion-row>
              <ion-col class="contentGridCol">
                <ion-list class="listContent" *ngFor="let item of listaOSPausadas">
                  <ion-item no-lines class="itemStyle" (click)="MostraDetalhes(item.idOrdemServico)">
                    <h2>Resumo: {{item.resumo}}</h2>
                    <p>Inicio Planejado: {{item.inicioPlanejado}}</p>
                    <p>Fim Planejado: {{item.fimPlanejado}}</p>
                    <span>Status: {{item.Status_idStatus}}</span>
                  </ion-item>
                  <div class="holdBtn">
                    <button  type="button" class="campo"(click)="AlteraStatus(item.Status_idStatus, item.idOrdemServico)">Iniciar</button> 
                  </div>
                  <ion-item no-lines class="itemStyle" >
                    <hr>
                  </ion-item>
                </ion-list>
              </ion-col>
            </ion-row>
          </ion-grid>
        </ion-list>
    </div>

</ion-content>